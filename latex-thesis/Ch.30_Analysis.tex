\chapter{Analysis\label{analysis}}

\section{Type annotating Python programs}


\comment{TODO: "in one study" kökköä kieltä}
\subsection{How}
Annotations often stay unchanged for a long while after being added \cite{di_grazia_evolution_2022}. In one study the projects under research  could be split into three patterns: regular annotation, type sprints, and occasional usage. The used pattern correlated with number of contributors, with regular annotation averaging the highest contributor count of 62, type sprints 45, and occasional use projects averaging 25 contributors. A motivation of type annotations helping coordination between higher numbers of active contributors was hypothesized to explain this phenomena.

In the same github-exported dataset, 78.3\% of commits that were type annotated contained type errors \cite{di_grazia_evolution_2022}.


\subsection{Popularity}
\comment{TODO: Why do programmers statically type Python programs? How often / to what proportion?}


\section{Type checking}

\subsection{Empirical benefits}

Making use of types and type checking can allow development time detection of various program defects. In a retroactive analysis it was found that up to 15\% of corrective defects that had to be patched could have been found at development time with types\cite{khan_empirical_2022}. Corrective defects consist of failures in processing, performance and implementation, and thus preventing or fixing them is a necessary part of software maintenance.

Both experienced and inexperienced programmers make significant amounts of type-related mistakes when working with Python \cite{khan_empirical_2022}. These consist of: using variables before initializing them, null safety errors, and re-using variables with values of different types. This implies that both experienced and inexperienced programmers can derive benefits from types.

Type annotations can enable improved editor support for the programmer.
\comment{TODO: laajenna, citation needed}


% \section{Runtime guarantees}
% Pydantic is a frequently used data validation library for Python that enables runtime data validation from type annotations\cite{pydanticdev_welcome_nodate}.
% \comment{TODO: FastAPI, Pydantic academic source}

\section{Phenomenon of typing Python programs}
\subsection{TODO: tää overläppää liikaa ylläolevian kaa?}


\subsection{How}
\comment{TODO: Python type annotations are used in ways x and y}

\subsection{Why}
\comment{TODO: Python type annotations are used for reasons x and y. }

\subsection{Costs}
\comment{TODO: Costs of type annotating python code}

\subsection{Benefits}
\comment{TODO: They provide benefit in situations such as a, b.}